<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SVG defs and use - using D3</title>
    <script src="https://cdn.jsdelivr.net/npm/d3-selection@3"></script>
</head>
<style>
    svg { border: solid 1px lightgray; }
</style>
<body>
<h1>SVG defs and use</h1>
<svg width="750" height="300">
    <!--<defs>
        <g id="earth">
            <circle cx="150" cy="150" r="120" fill="none" stroke="currentColor" stroke-width="20"></circle>
            <rect x="30" y="140" height="20" width="240" fill="currentColor"></rect>
            <rect y="30" x="140" width="20" height="240" fill="currentColor"></rect>
        </g>
    </defs>

    <use href="#earth" />
    <use href="#earth" color="red" transform="scale(0.5) translate(600,0) "/>
    <use href="#earth" color="blue" transform="translate(450,0) rotate(45,150,150)"/> -->
</svg>
<script>
    const svg = d3.select("svg");
    svg.append("defs")
       .append("g")
            .attr("id", "earth")
            .each(function() {
                d3.select(this).append("circle")
                    .attr("cx", 150)
                    .attr("cy", 150)
                    .attr("r", 120)
                    .attr("fill", "none")
                    .attr("stroke", "currentColor")
                    .attr("stroke-width", 20);
                d3.select(this).append("rect")
                    .attr("x", 30)
                    .attr("y", 140)
                    .attr("height", 20)
                    .attr("width", 240)
                    .attr("fill", "currentColor");
                d3.select(this).append("rect")
                    .attr("y", 30)
                    .attr("x", 140)
                    .attr("width", 20)
                    .attr("height", 240)
                    .attr("fill", "currentColor");
            });

    svg.append("use")
        .attr("href", "#earth");
    svg.append("use")
        .attr("href", "#earth")
        .style("color", "red")
        .attr("transform", "scale(0.5) translate(600,0)");
    svg.append("use")
        .attr("href", "#earth")
        .style("color", "blue")
        .attr("transform", "translate(450,0) rotate(45,150,150)");

</script>
</body>
</html>
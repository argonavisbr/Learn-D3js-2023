<!DOCTYPE html>
<html lang="en">
<head>
    <title>Multifetch</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>

<svg height="200" width="600"></svg>
<script>
    const entries = [
        {name: "Moon"},
        {name: "Phobos"},
        {name: "Deimos"},
        {name: "Europa"},
        {name: "Ganymede"},
        {name: "Io"},
        {name: "Callisto"}
    ];

    const promises = [];

    entries.forEach( (entry, index) => {
        promises.push(
            d3.image(`../data/images/${entry.name}.png`)
              .then(img => entry.image = img.src) // preload image if URL exists
              .catch(() => {}) // do nothing if file not found
        )
    });

    Promise.all(promises) // continue after all image files are loaded
        .then(() => {
            d3.select("svg")
                .selectAll("image")
                .data(entries.filter(d => d.image))
                .join("image")
                  .attr("href",d => d.image)
                  .attr("x", (d,i) => 10 + i*50).attr("y", 10)
                  .attr("height", 40).attr("width", 40);
        });




</script>


</body>
</html>

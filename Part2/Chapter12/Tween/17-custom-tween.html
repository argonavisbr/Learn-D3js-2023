<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <style>
        h1 {
            display: inline;
        }
        #one {
            color: red;
            font-size: 50px;
        }
        #two {
            color: green;
            font-size: 200px;
        }
        p {
            font-family: sans-serif;
            font-size: 18px;
        }
        .panel {
            margin-left: 300px
        }
        span {
            font-weight: bold;
        }
    </style>
</head>
<body>
<script src="js/transition-display.js"></script>
<script>
    const svg = d3.select("body")
        .append("svg")
        .attr("width", 800)
        .attr("height", 100);
    createTransitionPanel(svg);
</script>

<div class="panel">
    <p>Duration: <span id="dur"></span><br>
        Transition step: <span id="step"></span><br>
        Frame: <span id="frame"></span><br>
        Font size: <span id="size"></span></p>
</div>

<h1 id="one">A</h1>
<h1 id="two">B</h1>

<script>

    let count = 0;
    const duration = 5000;
    const delay = 1000;
    const ease = d3.easeElasticInOut;

    const fmt2 = d3.format(".2f");

    const t =
      d3.select("#one")
        .transition()
           .ease(ease)
           .duration(duration)
           .delay(delay)
           .tween("_", function() { // tween name is not used, but required
              d3.select("#dur").text(`${duration/1000}s`);
              const initialSize = d3.select("#one").style("font-size");
              const interpolator = d3.interpolateString(initialSize, "350px")
              return function(t) {
                  this.style.fontSize = interpolator(t)
                  d3.select("#step").text(fmt2(t));
                  d3.select("#frame").text(++count);
                  d3.select("#size").text(this.style.fontSize);
              }
           });

    monitorTransition(t, delay, duration);

</script>
</body>
</html>
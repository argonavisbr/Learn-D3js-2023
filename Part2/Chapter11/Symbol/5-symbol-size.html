<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Symbols</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        svg { border: solid 1px gray}
        path {
            stroke-width: .4;
            stroke: none;
            fill: none;
            fill-opacity: .95;
        }
        .container {
            stroke: black;
            stroke-dasharray: .5 .2;
            stroke-width: .15;
            fill: lightgray;
            fill-opacity: .5;
        }
        .grid line {
            stroke: gray;
            stroke-width: .1;
        }
    </style>
</head>
<body>
<h1>d3.symbol().size()</h1>
<p>This image shows d3.symbol() shapes in their default sizes. Each square below is 8 pixels wide, and the default size is 64 (8x8). The SVG was scaled up (using viewBox).</p>
<script>
    const width  = 896;
    const height = 256;

    const svg = d3.select("body")
        .append("svg")
        .attr("height",height)
        .attr("width",width)
        .attr("viewBox", `0 0 ${width/8} ${height/8}`)

    const h = 8;
    const m = 2;
    const x = 8;
    const y = 8;

    const color = d3.scaleOrdinal(d3.schemeCategory10).domain([0, d3.symbolsFill.length]);

    drawGrid();

    d3.symbolsFill.forEach((s,i) => drawSymbol(i, s, x + i*(h*2), y, "fill"));
    d3.symbolsStroke.forEach((s,i) => drawSymbol(i, s, x + i*(h*2), y+(h*2), "stroke"));

    function drawGrid() {
        const grid = svg.append("g").attr("class", "grid");
        for (let i = 0; i < width; i+=h) {
            grid.append("line")
                .attr("x1", i)
                .attr("y1", 0)
                .attr("x2", i)
                .attr("y2", height);
        }
        for (let i = 0; i < height; i+=h) {
            grid.append("line")
                .attr("x1", 0)
                .attr("y1", i)
                .attr("x2", width)
                .attr("y2", i);
        }
    }
    function drawSymbol(index, symbol, x, y, style) {

        const s = d3.symbol().type(symbol).size(h*h);

        // Reference container: size * size
        svg.append("rect")
            .attr("class", "container")
            .attr("width",h)
            .attr("height",h)
            .attr("x",-h/2 + x)
            .attr("y",-h/2 + y);

        // The symbol
        svg.append("path")
            .attr("d", s)
            .attr("transform", `translate(${x},${y})`)
            .style(style, color(index));
    }


</script>
</body>
</html>